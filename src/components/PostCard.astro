---
interface Props {
    title: string;
    date: Date;
    url: string;
    description?: string;
    isExternal?: boolean;
}

const { title, date, url, description, isExternal = false } = Astro.props;

const formatDate = (d: Date) => {
    return d.toLocaleDateString('en-US', { 
        year: 'numeric', 
        month: 'short'
    });
};
---

<article class="group py-4 -mx-3 px-3 rounded-lg hover:bg-midnight-900/30 transition-colors duration-150">
    <a 
        href={url} 
        target={isExternal ? "_blank" : "_self"}
        rel={isExternal ? "noopener noreferrer" : undefined}
        class="flex flex-col sm:flex-row sm:items-baseline gap-1 sm:gap-6"
    >
        <time class="flex-shrink-0 w-20 text-xs font-mono text-midnight-500 tabular-nums">
            {formatDate(date)}
        </time>
        <div class="flex-grow min-w-0">
            <h2 class="text-[15px] font-medium text-midnight-200 group-hover:text-white transition-colors duration-150 flex items-center gap-2">
                <span class="truncate">{title}</span>
                {isExternal && (
                    <svg class="w-3 h-3 flex-shrink-0 text-midnight-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                    </svg>
                )}
            </h2>
            {description && (
                <p class="mt-1 text-sm text-midnight-400 line-clamp-1">
                    {description}
                </p>
            )}
        </div>
    </a>
</article>
